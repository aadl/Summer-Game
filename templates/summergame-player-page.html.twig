{#
/**
 * Summer Game Player Page
 */
#}

<div id="summergame-player-page">
  <ul id="player-tabs">
    <li id="main-player">Player: {{ playername }}</li>

{#}
<?php if ($player_access && $other_players) { ?>
    <li><strong>Your Other Players: </strong></li>
    <?php echo implode('', $others_links); ?>
<?php } if ($player['uid'] == $user->uid) { ?>
    <li><?php echo l('Sign up an extra player', 'summergame/player/extra'); ?>
      <span class="hint--bottom" data-hint="Sign up an extra player in your household that doesn't need a separate website account.">[?]</span>
    </li>
<?php } ?>
  </ul>
#}

{% if player_access %}
  {% include('@summergame/summergame-player-info.html.twig') %}
{% endif %}

{# Player Score #}
{% for game_term, player_game_points in points %}
  {% if player_game_points.total %}
    <div class="scorecard">
    <h2 class="title"><a name="{{ game_term }}">{{ game_term }} Scorecard</a></h2>

    <div class="player-points">
      <h3>Points</h3>
      <table>
        <tr><th>Type</th><th>Points</th></tr>
        {% for type, type_points in player_game_points.types %}
          <tr><td>{{ type }}</td><td>{{ type_points }}</td></tr>
        {% endfor %}
        <tr><td>TOTAL POINTS EARNED</td><td>{{ player_game_points.total }}</td></tr>
        {% if game_term starts with 'SummerGame' %}
          <tr><td>Current Points Balance</td><td>{{ player_game_points.balance }}</td></tr>
        {% endif %}
      </table>

      <ul class="scorecard-buttons">
        <li class="button">
          <a href="/summergame/player/ledger/{{ player.pid }}?term={{ game_term }}">See Full Scorecard</a>
        </li>
      </ul>

      <p>Points date range: <br>
      {{ player_game_points.ledger|last.timestamp|date('F j, Y, g:i a') }} -<br>
      {{ player_game_points.ledger|first.timestamp|date('F j, Y, g:i a') }}</p>
    </div>

    <div class="player-badges">
      <h3>Badges</h3>
      {% if player_game_points.badges %}
        {% for badge in player_game_points.badges %}
{# TODO Replicate theme_summergame_badge function in Drupal 8 #}
          <img class="summergame-badge" title="{{ badge.title }}" src="http://play.old.aadl.org/files/sg_images/{{ badge.image }}_100.png">
        {% endfor %}
      {% else %}
        <p>This player hasn't earned any {{ game_term }} badges yet.</p>
      {% endif %}
    </div>
  </div><!-- .scorecard -->
  {% endif %}
{% endfor %}

</div><!-- #summergame-player-page -->
